FROM node:11.14.0-alpine

RUN apk update
RUN apk add git curl unzip python build-base
RUN curl "https://s3.amazonaws.com/aws-cli/awscli-bundle.zip" -o "awscli-bundle.zip" \
    && unzip awscli-bundle.zip \
    && ./awscli-bundle/install -i /usr/local/aws -b /usr/local/bin/aws

RUN mkdir -p /var/www
WORKDIR /var/www

COPY ./ ./

RUN npm install
RUN npm run build
