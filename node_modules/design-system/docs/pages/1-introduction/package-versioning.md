---
title: Versioning & Releases
template: doc.pug
---

## Semantic Release

The design system uses semantic `release` to keep versions numbers consistent and up-to-date. Please get familiar with its [official documentation](https://github.com/semantic-release/semantic-release).

## Automated releases

Releases run as an automated task on deployment. Each merge or direct commit to `master` branch, will trigger a release that upon checking release requirements, will push find the next version number a push this version to the repository.

Semantic release settings can be found in the file: `.releaserc`.

## Contentional Commits

Automated release are made possible thanks to [conventional change log commits](https://github.com/conventional-changelog/conventional-changelog), managed with [commitzen](https://github.com/commitizen/cz-cli).

On every commit, a series of options will be prompted to help you format your commits.

| Commit message                                                                                                                                                                                   | Release type               |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
| `fix(pencil): stop graphite breaking when too much pressure applied`                                                                                                                             | Patch Release              |
| `feat(pencil): add 'graphiteWidth' option`                                                                                                                                                       | ~~Minor~~ Feature Release  |
| `perf(pencil): remove graphiteWidth option`<br><br>`BREAKING CHANGE: The graphiteWidth option has been removed.`<br>`The default graphite width of 10mm is always used for performance reasons.` | ~~Major~~ Breaking Release |

This is standard is compulsory, because by analyzing conventional commits next release assets such as version number, changelog, and others can be determined automatically.

### How to commit
Commitizen is configured using [husky](https://github.com/typicode/husky) hooks so it should run on every `git commit`. Nevertheless, there are some backup options:

```bash
    git commit
    # or
    git cz
    # or
    npm run commit
```

#### How to skip prompt when doing amends?

* Run `git commit --amend` as usual
* Hit `ctrl + c` to skip prompt
* Previous commit message will be prompted on `vim` or your editor of choice as usual.

## Release Git workflow

1. A `develop` branch is created from `master`
    * checkout new develop branch (if doesn't exist)
    ```bash
    git branch develop
    git push -u origin develop
    ```

    ![image](https://www.atlassian.com/dam/jcr:2bef0bef-22bc-4485-94b9-a9422f70f11c/02%20(2).svg)

2. Feature branches are created from `develop`
    * always start new features work from `develop`
    ```bash
    git checkout develop
    git checkout -b feature_branch
    ```

3. When a `feature` is completed, PR to merge into the `develop` branch
    * always PR `feature_branch` against `develop`
    
    ![image](https://www.atlassian.com/dam/jcr:b5259cce-6245-49f2-b89b-9871f9ee3fa4/03%20(2).svg)

4. A `release` branch is created from `develop`
    * When ready to release, create `next` release_branch from develop
    ```bash
    git checkout develop
    git checkout -b next
    ```

5. When the review for `next` release_branch is done, merge into `develop` and `master`
    * PR next branch against master

    ![image](https://www.atlassian.com/dam/jcr:a9cea7b7-23c3-41a7-a4e0-affa053d9ea7/04%20(1).svg)

6. If an issue in `master` is detected a `hotfix` branch is created from `master`
    ```bash
    git checkout master
    git checkout -b hotfix_branch
    ```

7. Once the `hotfix` is completed, PR to merge into both `develop` and `master`.

    ![image](https://www.atlassian.com/dam/jcr:61ccc620-5249-4338-be66-94d563f2843c/05%20(2).svg)


Please refer to Attlassian's [`Git flow tutorial`](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow) for a more starter guidance.
