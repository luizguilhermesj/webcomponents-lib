---
title: How to migrate patterns
template: doc.pug
---

# Migrate patterns from alice

## 1. Get started
Chose your pattern to migrate in [alice](https://github.com/theiconic/alice).
All patterns are generally placed under  `alice/patterns/sass/molecules/` in the project.

>Tips: If you are not familiar with alice patterns, please read the below Molecules section.

----

### Molecules
A molecule is a fully self-contained styling component. It is organised into `components`,`config` and `output`.

#### File organisation
```bash
   buttons
   ├── v1
   │   ├── components
   │   │   └── _buttons.scss # mixins
   │   ├── config
   │   │   └── _buttons.scss # variables
   │   ├── output
   │   │   └── _buttons.scss # css selector
   │   .......  
   │
   └── _buttons-v1.scss #imports components, config and output
```

- **Components** contain all `mixins` that is the main styling structure or logic, any sass partials or sass mixins needed for the molecule. Note that `mixins` are the key to reusability and DRY components.

- **Config** defines all `variables` used in component and output with the !default tag.

- **Output** associates the partials or mixins defined in the component with `css selectors`.

#### Version
Molecules contain versions. Each version is represented by a molecule index file in the molecules main folder in the form `_<molecule-name>_v<version_number>.scss`.


#### Configuration

- **_molecules.scss** is basically a sass configuration set and includes a certain set of versions of molecules.

    > Note: We import any global design system's patterns in the [molecules](https://github.com/theiconic/alice/blob/master/patterns/sass/_molecules.scss) file that is also configured the most recent version of patterns in alice.

 ```bash
 alice/patterns/sass/_molecules.scss
 ```

 - **Sections** define where we decide how to generate output css based on pages. All imported molecules patterns and relevant partials are included in this level. 
 
    > Note: We import specific design system's patterns in the sections, [example of the product page](https://github.com/theiconic/alice/blob/master/public/sass/raptor/sections/product.scss#L21), so they are only included on a particular page when necessary. 

 ```bash
 # Section configuration for proudct page
 alice/public/sass/raptor/sections/product.scss
 ```


## 2. How to migrate

### Components in Design system
 Components contain specific UI components that are often composed of elements and other components.

#### File organisation
```bash
   src
   ├── components
   │   ├── buttons
   │   │   ├── _buttons.scss # output
   │   │   ├── _buttons-core.scss # mixins and partials.
   │   │   └── README.md
   ├── components.scss # imports patterns for the kitchensink
   └── README.md
```
- **`_<component-name>-core.scss`** contains all `mixins` and `variables` that is the main styling structure or logic, any sass partials or sass mixins needed for the molecule. Note that `mixins` are the key to reusability and DRY components.
    > IMPORTANT: alice(legacy) will **only import this file but also have its own output file**. It is decided to import only the core styling file to alice to reduce any complexity from the HTML markup changes but also to have more flexibility in the output file for any new services.

- **`_<component-name>*.scss`** associates mixins defined in the component with `css class selectors` for the output.
    > IMPORTANT: Design system will only use **class selectors** instead of any HTML selectors.

    ```sass
     /// YES
     .button {
        @include button-base;
     }

     /// NOPE
     button,
     input[type=button] {
        @include button-base;
     }
    ```


#### Steps to follow
1. Find the **latest** molecules pattern to migrate from [molecules](https://github.com/theiconic/alice/tree/master/patterns/sass/molecules) in alice.
     ```bash
     alice/patterns/sass/molecules/buttons/button/v3/..
     ```

2. Create a new directory with the pattern's name under `src/components` and create core styling scss, output scss and README files.
     ```bash
       src
       ├── components
       │   ├── buttons
       │   │   ├── _buttons.scss # output
       │   │   ├── _buttons-core.scss # mixins and partials.
       │   │   └── README.md
       │   ├── .......
       └── README.md
    ```

3. **Core styling (*buttons-core.scss*):** You can reuse the `molecule's components and variables` in design system. However, you may need to refactor it to remove unnecessary styles or logic if possible.

    If the pattern has any dependencies from others, you will need to migrate those at first (back to the step 1)

    |                |alice                          |design-system                  |
    |----------------|-------------------------------|-------------------------------|
    |Core styling    |`components/_buttons.scss` `config/_buttons.scss`|`components/_buttons-core.scss`|

    There are some changes on core mixins we made in Design system.

    > Tips: Use pixel, em, % and vh, vw directly instead of rem(). Design system does not support `rem`. *Why? The most of the benefits of `rem` have been made obsolete by browser, [reference](https://hackernoon.com/rems-and-ems-and-why-you-probably-dont-need-them-664b9ce1e09f)*.

    ```sass
     /// YES
     @mixin button-base {
        padding: 16px;
     }

     /// NOPE
     @mixin button-base {
        @include rem(padding, 16px);
     }
    ```
    > Tips: Use color-scale() instead of any *lightest/darkest* color variables.

    ```sass
     /// Imports basic settings including colors, fonts etc
     @import '../../settings/settings';

     /// YES
     @mixin button-base {
        border-color: color-scale($color-grey, 7);
        background-color: color-scale($color-grey, -2);
     }

     /// NOPE
     @mixin button-base {
        border-color: $color-lightest-grey;
        background-color: $color-darkest-grey;
     }
    ```

    > Tips: Use spacing() instead of any *$pixel-grid-base* variable.

    ```sass
     /// Imports dimensions tools
     @import '../../tools/dimensions';

     /// YES
     @mixin button-base {
       height: spacing(2);
     }

     /// NOPE
     @mixin button-base {
       height: $pixel-grid-base * 2
     }

     /// NOPE
     @mixin button-base {
       height: 8px * 2
     }
    ```

4. **Output (*button.scss*) :** You can reuse some parts of the `molecule's output`, you must use only class selectors instead of HTML selectors.

    |                |alice                          |design-system                  |
    |----------------|-------------------------------|-------------------------------|
    |Output          |`v3/output/_buttons.scss`      |`components/_buttons.scss`     |

    As mentioned, alice will have its own output file. You must consider how to create the new output file in the both applications. Steps to follow is the below.

    > It is decided to import only the core styling file to alice to reduce any complexity from the HTML markup changes but also to have more flexibility in the output file for any new services.

    a. In `design-system`: Create a new file and import the core styling, then include mixins under class selector.

    ```sass
    /// Imports buttons-core
    @import 'buttons-core';

    /// YES
    .button {
        @include button-base;
    }

    /// NOPE
    button,
    input[type=button]  {
        @include button-base;
    }
    ```

    b-1. In `alice`: Create a new directory and place the **a new output file** under the patterns that must reflect the latest version of pattern's output file.

    > Tips: Refer the classes/HTML selectors based on the latest version's output file. You may need to modify it depending on whatever you change in `_<component-name>-core.scss` during the migration.

    ```bash
    buttons
    ├── design-system
    │   └── _buttons.scss # place the alice output for the migrated pattern.
    ├── v1 ...
    ├── v2 ...
    ├── v3 # the latest version
    │   ├── output
    │   │   └── _buttons.scss # Reference
    │   ....... 
    └── _buttons-v3.scss
    ```
    b-2. In `alice`: Do not forget to configure your patterns in mosa's molecules file. You will need to replace the old pattern's path.

    ```sass
    /// Update the configuration in .../skins/mosa/_molecules.scss

    /// Remove it and then;
    @import 'molecules/buttons/button/button-v3';

    /// Add the new patterns!
    @import 'components/buttons/buttons-core'; // from design-system
    @import 'molecules/buttons/button/design-system/buttons'; // from alice

    ```

5. Import the pattern's output in `src/components/components.scss` for the Design system documentation hub.

    ```sass
     @import 'buttons/buttons.scss';
    ```

----
