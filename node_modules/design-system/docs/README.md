# Design System Documentation Hub

## Quick start

The Design system hub is a static web page that integrates documentation guidelines and design resources – serving them as single source for UX design, code patterns and UI elements.

 **Note:** this quick reference presumes you've got both [npm][npm] and [git][git] installed.

## Architecture

This is a file based architecture, it works by declaring navigation base on folders and files, in which:
* `folders` `~=` `Chapters`, and
* `markdown` files `~=` `pages` or content

*Example:*
```bash
  docs
  ├── pages
  │   ├── 1-introduction
  │   │   ├── design-principles.md
  │   │   ├── design-vision.md
  │   │   ├── ...
  │   ├── 2-design-guidelines
  │   ├── 3-foundations
  │   ├── ...
  │   ├── #-chapter-name
  │   │   ├── # ...page-name.md
  │   ├── assets # js. css, images
  │   └── index.md
  ├── templates
  │   ├── doc.pug # pages template
  │   ├── nav.pug # main navigation 
  │   └── layout.pug # main template
  ├── README.md
  └── config.json # main configuration point
```

### Bundling
1. Content is pull from `.md` sources and a `Table of Contents` aka `TOC`. TOC defines how navigation is going to be assembled.
2. Compilation is performed via generators.
2.1 In `assets.js` plugin. This parses TOC into a valid `content tree` which contains chapters and pre-processed `.md` files + `metadata`.
2.2. A `HotReload` plugin will watch files changes and perform hot reload in the browser via web-sockets upon changes.
3. Generated `content tree` will then be process to an HTML output through `.pug` temples. There are 3 main templates:
    * **layout**: it is the main HTML output that contains containers for header, navigation, body and footer. It is also responsible for scripts and stylesheets injection.
    * **docs**: main page or article content template. this will render `.md` files content by filling up `layout` containers.
    * **navigation**: main left navigation, this takes the `TOC` and `content tree` to auto generate a `navbar` for the `layout` template.
4. Bundling process finishes by compiling all `content tree` into an static HMTL output in `./dist/docs`. From there the web page can be deployed/hosted in any web server.

![Design System Hub](assets/images/DSHub.png)

## How to run local server
```bash
  npm install && npm start
```

## How to add a new page
This hub is powered by [wintersmith.io] a simple file base static site generator.

To add a new page you must follow 2 steps:

### Step 1: Add content chapter and files
1. Add a chapter. Go to directory `./docs/pages/`, clone or create a new directory following [naming conventions](#naming).
2. Add [content files](#content) to previous directory. Each `file` equals a `page` and will be added to page navigation automatically.
  Notice that:
    * Content files must be markdown. `ie: get-started.md`
    * Content files must first include page metadata like `title` and `template`, then content.
      ```markdown
        ---
        title: Get Started
        template: doc.pug
        ---

        # Heading
        ... content ...
      ```

    #### <a name="naming"></a>Naming conventions:
      * In general `middle-case` is used for naming chapter folders and content files.
      * *Chapter* names should have a incrementing number and a name `#-name`.


### Step 2: Add a TOC entry
TOC controls how content gets rendered on main navigation bar. Pages and chapters must added in the desired order.

1. Open configuration file `./docs/config.json` and scroll to the end,
2. Locate `TOC` key. Clone an existing entry or create a new one as follows:

    ```json
    "TOC": {
        "1-Introduction": {
          "title": "Introduction",
          "pages": ["get-started", "guidelines", ... ]
        },
        "2-Foundations": {
          "title": "Foundations",
          "pages": ["colours", "buttons", ... ]
        },
        ...
        "#-chapter": { // <- matches folder names
          "title": "Page Title",
          "pages": ["file-name-a", "file-name-b", ... ] // <- matches file names

        }
    }
    ```

    *Notice that keys used for `chapters` and `pages` in TOC matches folder and file names in `./docs/pages/`*


## <a name="content"></a> How to write a content file
Content files get transform into HTML files. Which means that both markdown and HTML tags will be compile and pass through the stylesheet when generating final output.

1. Create a `.md` file in any folder under `./docs/pages`.
2. Must add page metadata: `title`, `template`.
    ```markdown
      ---
      title: Page Title
      template: template-name.pug
      ---

      # Heading
      ... body content ...
    ```
    *Note: available templates maybe under `./docs/templates`*
3. Add content body, here it gets easy just enter markdown or HTML content.
  Any classes available in the design system main stylesheet must be available:
    
    ```markdown
      ## Button Sizes

      ### Default
      <button class="button">button default</button>

      ```html
      <button class="button">button default</button>
      ```
    ```

  ### *( Optional )* Adding images:

  Content can be enhanced by adding images, those can be included in `./docs/pages/assets/images`. And then reference them inside `.md` files:

  * by adding an `img` tag with `src` to `/assets/path-to-my-image`
    ```markdown
      <img src="assets/images/DSHub.png" alt="Design System Hub">
    ```

  * or, by adding a markdown link 
    ```makrdown
    ![Design System Hub](assets/images/DSHub.png)
    ```

## Available scripts

```bash
# Installation
  npm install

# Full build
  npm run build:docs

# Run scss/js tests
  npm run test

# Build docs static build
  npm run build:docs

# Quick docs preview server with HMR
  npm run build:preview

# Full docs preview server with HMR
  npm start

# CSS build
  npm run build:scss

# CSS lint
  npm run lint:scss

# Auto-fix js linter issues
  npm run fix:js

# Auto-fix scss linter issues
  npm run fix:scss

```

[npm]: https://nodejs.org/en/
[git]: https://git-scm.com/download/mac
[wintersmith.io]: http://wintersmith.io/ 
