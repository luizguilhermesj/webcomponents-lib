@import "layout-core";
@import "prepostfix/prepostfix-core";

@mixin prefix-output {
  .form__input {
    @include postfix-base;
  }

  .button {
    @include prefix-base;
  }
}

@mixin postfix-output {
  .form__input {
    @include prefix-base;
  }

  .button {
    @include postfix-base;
  }
}

.form {
  &__group {
    @include form-group-base;

    &__item {
      @include form-group-base;
      margin-bottom: 0;
    }

    &--right,
    &__item--right {
      @include form-group-right;
    }

    &--inline,
    &__item--inline {
      @include form-group-inline;
    }
  }

  &__group--inline &__group__item,
  &__group--inline &__label {
    @include form-group-item-inline;
  }

  &__action {
    display: flex;
    flex-direction: row;
    align-items: center;

    .form__input {
      @include form-action-input;

      &__icon {
        @include form-action-input-icon;
      }
    }

    &--postfix:not(#{&}--stack) {
      @include postfix-output;
    }

    &--prefix {
      flex-direction: row-reverse;
    }

    &--prefix:not(#{&}--stack) {
      @include prefix-output;
    }

    &--stack {
      flex-direction: column;
      align-items: unset;

      .form__input {
        flex: unset;
      }
    }

    &--stack#{&}--prefix,
    &--stack#{&}--postfix {
      .form__input {
        margin-bottom: spacing(1);
      }
    }

    @include from(md) {
      &--stack {
        flex-direction: row;

        .form__input {
          flex: 1;
        }
      }

      &--stack#{&}--prefix {
        flex-direction: row-reverse;
        @include prefix-output;
      }

      &--stack#{&}--postfix {
        @include postfix-output;
      }
    }
  }
}
