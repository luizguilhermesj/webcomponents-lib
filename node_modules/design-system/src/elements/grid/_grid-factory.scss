@import "grid-core";

/// @access private
$__flex-positioning-props-map: (
  ("start", "justify-content", "flex-start"),
  ("center", "justify-content", "center"),
  ("end", "justify-content", "flex-end"),
  ("top", "align-items", "flex-start"),
  ("middle", "align-items", "center"),
  ("bottom", "align-items", "flex-end"),
  ("between", "justify-content", "space-between"),
  ("around", "justify-content", "space-around"),
  ("evenly", "justify-content", "space-evenly")
); // (name, property, value)

/// @access private
$__flex-order-props-map: (
  ("first", "order", -1),
  ("last", "order", 1)
); // (name, property, value)

/// __flex-grid-factory
/// @access private
/// @param {*} $breakpoint
@mixin __flex-grid-factory($breakpoint) {
  .#{$grid-col-class}-#{$breakpoint} {
    @include col($breakpoint);
  }

  @for $i from 1 through $grid-columns {
    .#{$grid-col-class}-#{$breakpoint}-#{$i} {
      @include col($breakpoint, $i);
    }

    .#{$grid-offset-class}-#{$breakpoint}-#{$i} {
      @include col-offset($breakpoint, $i);
    }
  }

  // .start-sm, .start-md,
  // .top-sm, .top-md, etc...
  @each $setting in $__flex-positioning-props-map {
    $name: nth($setting, 1);
    $property: nth($setting, 2);
    $value: nth($setting, 3);

    .#{$name}-#{$breakpoint} {
      @include __apply-at-media-query($breakpoint) {
        #{$property}: #{$value};
      }
    }
  }

  // .first-sm, .first-md,
  // .last-sm, .last-md, etc...
  @each $setting in $__flex-order-props-map {
    $name: nth($setting, 1);
    $property: nth($setting, 2);
    $value: nth($setting, 3);

    .#{$name}-#{$breakpoint} {
      @include __apply-at-media-query($breakpoint) {
        #{$property}: #{$value};
      }
    }
  }
}

/// __col-classes-by-breakpoint-factory
/// @access private
@mixin __col-classes-by-breakpoint-factory {
  @for $i from 1 through length($breakpoint-up-prefixes) {
    $breakpoint: nth($breakpoint-up-prefixes, $i);
    @include __flex-grid-factory($breakpoint);
  }
}

/// __alignment-positions-factory
/// @access private
@mixin __alignment-positions-factory {
  $settings: join(
    $__flex-positioning-props-map,
    $__flex-order-props-map,
    comma
  );

  @each $setting in $settings {
    $name: nth($setting, 1);
    $property: nth($setting, 2);
    $value: nth($setting, 3);

    // start, center, middle, first, last, etc...
    .#{$name} {
      @include __apply-at-media-query {
        #{$property}: #{$value};
      }
    }
  }
}
