const util = require('util');

// Load .env settings
require('dotenv').config();

// @private
const ENV_DEV = 'development';
// @private
const ENV_PROD = 'production';
// @private
const logColors = {
  alert: '\x1b[31m%s\x1b[0m',
  success: '\x1b[32m%s\x1b[0m',
  warning: '\x1b[33m%s\x1b[0m',
  info: '\x1b[35m%s\x1b[0m',
  white: '\x1b[37m%s\x1b[0m'
};

// @private
const logColor = color => logColors[color] || logColors.white;

// Check if environment is Development
const isDev = () => process.env.ENV === ENV_DEV;

// Check if environment is Production
const isProd = () => process.env.ENV === ENV_PROD;

/**
 * Logs passed arguments using node inspect util
 * @param  {...any} args
 */
const log = (...args) => console.log(util.inspect(args, false, null, true));

/**
 * Logs passed tips in blocks separated by `hr`
 * used for logging script's started|finished events
 * @param  {...any} tips
 */
const logger = (...tips) => {
  const hr = '-----';
  console.log(tips.concat(hr).join('\n'));
};

/**
 * Logs a single message with color
 * @param {*} msg message to be displayed
 * @param {*} color text color one of: alert | success | warning | info | white
 */
const cLog = (msg, color = 'alert') => console.log(logColor(color), msg);

module.exports = {
  log,
  cLog,
  logger,
  isDev,
  isProd
};
